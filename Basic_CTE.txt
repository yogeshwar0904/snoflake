CREATE OR REPLACE PROCEDURE DB.TBL.PROC()
RETURNS TABLE(sql_state number, error_number number, sql_err_msg STRING)
LANGUAGE SQL
AS
DECLARE 
RES RESULTSET;
DATA VARCHAR;
BEGIN

DATA := 'WITH BOM_DETAILS AS (
SELECT sql_state, error_number, sql_err_msg FROM DB.TBL.BOMLIST)
SELECT * FROM BOM_DETAILS';
RES := (EXECUTE IMMEDIATE :DATA);
RETURN TABLE(RES);
END;

CALL DB.TBL.PROC();







